(this["webpackJsonpsneakers-react"]=this["webpackJsonpsneakers-react"]||[]).push([[0],{19:function(e,t,c){e.exports={overlay:"Drawer_overlay__2kXNp",overlayVisible:"Drawer_overlayVisible__hEYk7",drawer:"Drawer_drawer__2u3R_",items:"Drawer_items__3f0uc"}},20:function(e,t,c){e.exports={card:"Card_card__30-ZV",plus:"Card_plus__1S9Gp",favorite:"Card_favorite__16al2"}},41:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),n=c(34),s=c.n(n),i=(c(41),c(14)),l=c(5),o=c.n(l),d=c(11),j=c(4),u=c(13),b=Object(r.createContext)({}),x=function(){var e=a.a.useContext(b),t=e.cartItems,c=e.setCartItems,r=t.reduce((function(e,t){return t.price+e}),0);return{cartItems:t,setCartItems:c,totalPrice:r}},m=c(1),h=function(e){var t=e.openCart,c=x(),r=c.totalPrice,a=c.newPrice;return Object(m.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(m.jsx)(u.b,{to:"/",children:Object(m.jsxs)("div",{className:"d-flex align-center",children:[Object(m.jsx)("img",{width:40,height:40,src:"img/logo.png",alt:"HeaderLogo"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-uppercase",children:"React Sneakers"}),Object(m.jsx)("p",{className:"opacity-5",children:"Sneakers store"})]})]})}),Object(m.jsxs)("ul",{className:"d-flex ",children:[Object(m.jsxs)("li",{className:"mr-30",children:[Object(m.jsx)("img",{onClick:t,className:"cu-p",width:"18px",height:"18px",src:"img/cart.svg",alt:"Cart"}),Object(m.jsxs)("span",{className:"fw-bold",children:[a," ",r]}),"$"]}),Object(m.jsx)("li",{className:"mr-10",children:Object(m.jsx)(u.b,{to:"/favorites",children:Object(m.jsx)("img",{className:"cu-p",width:"18px",height:"18px",src:"img/heart.svg",alt:"fav"})})}),Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/orders",children:Object(m.jsx)("img",{width:"18px",height:"18px",src:"img/union.svg",alt:"User"})})})]})]})},f=function(e){var t=e.title,c=e.desc,a=e.image,n=Object(r.useContext)(b).setCartOpened;return Object(m.jsxs)("div",{className:"cartEmpty d-flex align-center justify-center flex-column flex",children:[Object(m.jsx)("img",{className:"mb-20",width:"120px",src:a,alt:""}),Object(m.jsx)("h2",{children:t}),Object(m.jsx)("p",{className:"opacity-6",children:c}),Object(m.jsxs)("button",{onClick:function(){return n(!1)},className:"greenButton",children:[Object(m.jsx)("img",{src:"img/arrow.svg",alt:"Arrow"})," Go back"]})]})},O=c(6),p=c.n(O),v=c(19),g=c.n(v),k=function(e){return new Promise((function(t,c){return setTimeout(t,e)}))},w=function(e){var t=e.opened,c=e.closeCart,a=e.items,n=void 0===a?[]:a,s=e.onRemove,i=Object(r.useState)(!1),l=Object(j.a)(i,2),u=l[0],b=l[1],h=Object(r.useState)(null),O=Object(j.a)(h,2),v=O[0],w=O[1],N=Object(r.useState)(!1),C=Object(j.a)(N,2),y=C[0],_=C[1],S=x(),I=S.totalPrice,B=S.cartItems,A=S.setCartItems,L=function(){var e=Object(d.a)(o.a.mark((function e(){var t,c,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,p.a.post("https://6121174324d11c001762ef4c.mockapi.io/orders",{items:B});case 4:t=e.sent,c=t.data,w(c.id),b(!0),A([]),r=0;case 10:if(!(r<B.length)){e.next=18;break}return a=B[r],e.next=14,p.a.delete("https://6121174324d11c001762ef4c.mockapi.io/cart/".concat(a.id));case 14:k(1e3);case 15:r++,e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),alert("Cant order");case 23:_(!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"".concat(g.a.overlay," ").concat(t&&g.a.overlayVisible),children:Object(m.jsxs)("div",{className:g.a.drawer,children:[Object(m.jsxs)("h2",{className:"mb-30 d-flex justify-between",children:["Cart",Object(m.jsx)("img",{onClick:c,className:"removeBtn cu-p",src:"img/btn-remove.svg",alt:"Close"})]}),n.length>0?Object(m.jsxs)("div",{className:"flex flex-column d-flex",children:[Object(m.jsx)("div",{className:"items flex",children:n.map((function(e){return Object(m.jsxs)("div",{className:"cartItem d-flex align-center mb-20",children:[Object(m.jsx)("div",{style:{backgroundImage:"url(".concat(e.imageUrl,")")},className:"cartItemImg"}),Object(m.jsxs)("div",{className:"mr-20 flex",children:[Object(m.jsx)("p",{className:"mb-5",children:e.name}),Object(m.jsxs)("b",{children:[e.price,"$"]})]}),Object(m.jsx)("img",{onClick:function(){return s(e.id)},className:"removeBtn",src:"img/btn-remove.svg",alt:"Remove"})]},e.id)}))}),Object(m.jsxs)("div",{className:"cartTotalBlock",children:[Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{children:"Total"}),Object(m.jsx)("div",{}),Object(m.jsxs)("b",{children:[I,"$"]})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{children:"Tax 5%:"}),Object(m.jsx)("div",{}),Object(m.jsxs)("b",{children:[Math.round(.05*I),"$"]})]})]}),Object(m.jsxs)("button",{disabled:y,onClick:L,className:"greenButton",children:["Order ",Object(m.jsx)("img",{src:"img/arrow.svg",alt:""})]})]})]}):Object(m.jsx)(f,{title:u?"Order completed":"Cart is empty",image:u?"img/order.jpg":"img/empty-cart.jpg",desc:u?"Your order is #".concat(v):"Add at least one pair before order"})]})})},N=c(2),C=c(12),y=c(20),_=c.n(y),S=c(36),I=function(e){var t=e.loading,c=void 0!==t&&t,a=e.id,n=e.price,s=e.name,i=e.imageUrl,l=e.onAddButtonClick,o=e.onLikeClick,d=e.favorited,u=void 0!==d&&d,x=Object(r.useContext)(b).isItemAdded,h=Object(r.useState)(u),f=Object(j.a)(h,2),O=f[0],p=f[1];return Object(m.jsx)("div",{className:_.a.card,children:c?Object(m.jsxs)(S.a,{speed:2,width:190,height:255,viewBox:"0 0 160 200",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(m.jsx)("rect",{x:"543",y:"236",rx:"3",ry:"3",width:"88",height:"6"}),Object(m.jsx)("rect",{x:"545",y:"236",rx:"3",ry:"3",width:"52",height:"6"}),Object(m.jsx)("circle",{cx:"571",cy:"581",r:"20"}),Object(m.jsx)("rect",{x:"0",y:"-1",rx:"10",ry:"10",width:"150",height:"90"}),Object(m.jsx)("rect",{x:"0",y:"101",rx:"2",ry:"2",width:"150",height:"15"}),Object(m.jsx)("rect",{x:"0",y:"131",rx:"3",ry:"3",width:"90",height:"15"}),Object(m.jsx)("rect",{x:"0",y:"172",rx:"8",ry:"8",width:"80",height:"24"}),Object(m.jsx)("rect",{x:"116",y:"165",rx:"8",ry:"8",width:"32",height:"32"})]}):Object(m.jsxs)(m.Fragment,{children:[o&&Object(m.jsx)("div",{className:_.a.favorite,children:Object(m.jsx)("img",{onClick:function(){o({price:n,name:s,imageUrl:i,id:a}),p(!O)},src:O?"img/heart1.svg":"img/heart0.svg",alt:"Favorite"})}),Object(m.jsx)("img",{width:"100%",height:"140px",src:i,alt:""}),Object(m.jsx)("h5",{children:s}),Object(m.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(m.jsxs)("div",{className:"d-flex flex-column",children:[Object(m.jsx)("span",{children:"Price:"}),Object(m.jsxs)("b",{children:[n,"$"]})]}),l&&Object(m.jsx)("img",{className:_.a.plus,onClick:function(){l({price:n,name:s,imageUrl:i,id:a})},src:x(a)?"img/btn-check.svg":"img/plus-button.svg",alt:"Add"})]})]})})},B=function(e){var t=e.loading,c=e.items,r=e.onAddToCart,a=e.onLikeClick,n=e.searchValue,s=e.onChangeInput,l=e.setSearchValue;return Object(m.jsxs)("div",{className:"content p-40",children:[Object(m.jsxs)("div",{className:"d-flex align-center mb-40 justify-between",children:[Object(m.jsxs)("h1",{children:[n?"Searching: '".concat(n,"'"):"All sneakers"," "]}),Object(m.jsxs)("div",{className:"searchBlock d-flex",children:[Object(m.jsx)("img",{src:"img/search.svg",alt:"Search"}),Object(m.jsx)("input",{value:n,onChange:s,type:"text",placeholder:"Search..."}),n&&Object(m.jsx)("img",{onClick:function(){return l("")},className:"removeBtn clearBtn",src:"img/btn-remove.svg",alt:"Remove"})]})]}),Object(m.jsx)("div",{className:"d-flex flex-wrap cardsBlock",children:function(){var e=c.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return(t?Object(i.a)(Array(7)):e).map((function(e,c){return Object(m.jsx)(I,Object(C.a)(Object(C.a)({onAddButtonClick:function(e){return r(e)},onLikeClick:function(e){return a(e)}},e),{},{loading:t}),c)}))}()})]})},A=function(){var e=Object(r.useContext)(b),t=e.liked,c=e.onLikeClick;return Object(m.jsxs)("div",{className:"content p-40",children:[Object(m.jsx)("div",{className:"d-flex align-center mb-40 justify-between",children:Object(m.jsx)("h1",{children:" My favorites"})}),Object(m.jsx)("div",{className:"d-flex flex-wrap cardsBlock",children:t.map((function(e,t){return Object(m.jsx)(I,Object(C.a)({favorited:!0,onLikeClick:c},e),t)}))})]})},L=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1],n=Object(r.useState)(!1),s=Object(j.a)(n,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){u(!0),function(){var e=Object(d.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("https://6121174324d11c001762ef4c.mockapi.io/orders");case 3:t=e.sent,c=t.data,a(c.map((function(e){return e.items})).flat()),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Error getting orders"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(m.jsxs)("div",{className:"content p-40",children:[Object(m.jsx)("div",{className:"d-flex align-center mb-40 justify-between",children:Object(m.jsx)("h1",{children:" My orders"})}),Object(m.jsx)("div",{className:"d-flex flex-wrap cardsBlock",children:(l?Object(i.a)(Array(4)):c).map((function(e,t){return Object(m.jsx)(I,Object(C.a)(Object(C.a)({},e),{},{loading:l}),t)}))})]})};var P=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1],n=Object(r.useState)([]),s=Object(j.a)(n,2),l=s[0],u=s[1],x=Object(r.useState)(!1),f=Object(j.a)(x,2),O=f[0],v=f[1],g=Object(r.useState)(""),k=Object(j.a)(g,2),C=k[0],y=k[1],_=Object(r.useState)([]),S=Object(j.a)(_,2),I=S[0],P=S[1],V=Object(r.useState)(!0),T=Object(j.a)(V,2),E=T[0],R=T[1];Object(r.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,c,r,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.a.get("https://6121174324d11c001762ef4c.mockapi.io/cart"),p.a.get("https://6121174324d11c001762ef4c.mockapi.io/liked"),p.a.get("https://6121174324d11c001762ef4c.mockapi.io/items")]);case 3:t=e.sent,c=Object(j.a)(t,3),r=c[0],n=c[1],s=c[2],R(!1),u(r.data),P(n.data),a(s.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Cant fetch data"),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var U=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=7;break}return u((function(e){return e.filter((function(e){return Number(t.id)!==Number(e.id)}))})),e.next=5,p.a.delete("https://6121174324d11c001762ef4c.mockapi.io/cart/".concat(t.id),t);case 5:e.next=10;break;case 7:return e.next=9,p.a.post("https://6121174324d11c001762ef4c.mockapi.io/cart",t);case 9:u((function(e){return[].concat(Object(i.a)(e),[t])}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Cant add item");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(o.a.mark((function e(t){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!I.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=7;break}return e.next=4,p.a.delete("https://6121174324d11c001762ef4c.mockapi.io/liked/".concat(t.id));case 4:P((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=12;break;case 7:return e.next=9,p.a.post("https://6121174324d11c001762ef4c.mockapi.io/liked",t);case 9:c=e.sent,r=c.data,P((function(e){return[].concat(Object(i.a)(e),[r])}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Cant add to favorite");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=4,p.a.delete("https://6121174324d11c001762ef4c.mockapi.io/cart/".concat(t));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),alert("Cant remove item from cart");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(b.Provider,{value:{cartItems:l,liked:I,items:c,isItemAdded:function(e){return l.some((function(t){return Number(t.id)===Number(e)}))},onLikeClick:$,setCartOpened:v,setCartItems:u,onAddToCart:U},children:Object(m.jsxs)("div",{className:"wrapper clear",children:[Object(m.jsx)(w,{items:l,closeCart:function(){v(!1),document.body.style.overflow="visible"},onRemove:D,opened:O}),Object(m.jsx)(h,{cartItems:l,openCart:function(){v(!0),O||(document.body.style.overflow="hidden")}}),Object(m.jsx)(N.a,{path:"/sneakers",exact:!0,children:Object(m.jsx)(B,{cartItems:l,searchValue:C,items:c,onAddToCart:U,onLikeClick:$,onChangeInput:function(e){y(e.target.value)},setSearchValue:y,loading:E})}),Object(m.jsx)(N.a,{path:"/favorites",exact:!0,children:Object(m.jsx)(A,{})}),Object(m.jsx)(N.a,{path:"/orders",exact:!0,children:Object(m.jsx)(L,{})})]})})};c(67);s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(P,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.97ead81b.chunk.js.map